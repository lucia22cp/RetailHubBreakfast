<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retail Hub Breakfast Event Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Chart.js for Infographics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <!-- Load Chart.js Data Labels Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Custom Tailwind configuration for brand colors */
        :root {
            --color-primary-dark: #5c0014;    /* Dark Maroon: Primary Text, Main Accent */
            --color-secondary-dark: #003f4d;  /* Dark Teal: Secondary Text, Strong Accent */
            --color-accent-1: #c63500;        /* Burnt Orange: Tertiary Accent */
            
            --color-light-accent-1: #ffbfc2;  /* Pale Pink: Very Light Accent */
            --color-light-accent-2: #c0eded;  /* Pale Cyan: Borders, Table Headers */
            --color-light-accent-3: #ffd0b7;  /* Pale Peach: Light Chart Segment */
            
            --color-background-soft: #f1f5f6; /* Off-White: Main Background */
            --color-white: #FFFFFF;          /* Card Background */
            --color-chart-text: #171819;      /* Custom Dark Text for Charts */
        }
        
        /* Custom Tailwind classes for brand colors */
        .text-primary-dark { color: var(--color-primary-dark); }
        .bg-primary-dark { background-color: var(--color-primary-dark); }
        .text-secondary-dark { color: var(--color-secondary-dark); }
        .bg-secondary-dark { background-color: var(--color-secondary-dark); }
        .text-accent-1 { color: var(--color-accent-1); }
        .bg-accent-1 { background-color: var(--color-accent-1); }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background-soft);
            padding: 2rem;
        }

        /* Chart container style */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        /* Specific height for funnel/expense charts */
        .chart-container-small {
            position: relative;
            height: 250px;
            width: 100%;
        }

        /* Responsive table style */
        .responsive-table {
            border-collapse: collapse;
            width: 100%;
        }
        .responsive-table th, .responsive-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--color-light-accent-2);
        }
        .responsive-table th {
            background-color: var(--color-light-accent-2);
            color: var(--color-secondary-dark);
            font-weight: 600;
        }
        .card {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            border-radius: 0.75rem;
            background-color: var(--color-white);
            padding: 1.5rem;
            transition: transform 0.3s ease;
        }
        /* Define specific border colors for metric cards */
        .metric-card-1 { border-left: 4px solid var(--color-accent-1); } 
        .metric-card-2 { border-left: 4px solid var(--color-accent-1); }
        .metric-card-3 { border-left: 4px solid var(--color-accent-1); }
        .metric-card-4 { border-left: 4px solid var(--color-accent-1); }
    </style>
</head>
<body>

    <div class="max-w-7xl mx-auto">
        <!-- Dashboard Header -->
        <header class="mb-8">
            <h1 class="text-4xl font-extrabold text-primary-dark mb-2">Retail Hub Breakfast Event Analysis</h1>
            <p class="text-lg text-secondary-dark">Performance Dashboard</p>
        </header>

        <!-- Executive Summary Card -->
        <div class="card mb-8">
            <h2 class="text-2xl font-bold text-primary-dark mb-4">Executive Attendance Summary</h2>
            <p class="text-secondary-dark leading-relaxed mb-3">
                A total of <strong>208 people</strong> were directly invited, split into <b>HQ Workshop</b> (66), <b>NGRH Members</b> (29), and <b>Directly Invited Clients/Retail</b> (113). 
                An additional <strong>7 external guests</strong> registered through social channels (<b>External Not Invited</b>), bringing the total confirmed RSVPs to <strong>60</strong>.
            </p>
            <ul class="list-disc ml-6 text-secondary-dark leading-relaxed">
                <li>The direct <strong>RSVP Rate</strong> (excluding external registrations) was <strong>25%</strong> (53 responses from 208 direct invitations).</li>
                <li>Total <strong>Attendance</strong> reached <strong>50 people</strong>. This count includes <b>6 "Silent Attendees"</b> who did not RSVP but were identified post-event.</li>
                <li>The <strong>Show-Up Rate for Direct RSVPs</strong> was robust at <strong>74%</strong> (39 direct attendees out of 53 direct RSVPs).</li>
                <li>The <strong>Total Attendance Rate</strong> (based on direct invites) was <strong>22%</strong>.</li>
            </ul>
            <p class="text-xs text-right text-gray-500 mt-4">
                *Note: Final attendance was manually estimated by reviewing post-event photos; minor deviations are possible.
            </p>
        </div>
        <!-- End Executive Summary Card -->

        <!-- 1. Key Performance Metrics -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
            <!-- Total Attendance -->
            <div class="card metric-card-1">
                <p class="text-sm font-medium text-secondary-dark uppercase">Total Attendance</p>
                <p class="text-4xl font-bold text-accent-1 mt-1">50</p>
                <p class="text-xs text-secondary-dark">Includes 6 Silent Attendees</p>
            </div>
           <!-- RSVP Rate (Excl. External) -->
            <div class="card metric-card-3">
                <p class="text-sm font-medium text-secondary-dark uppercase">RSVP Rate (Excl. External)</p>
                <p class="text-4xl font-bold text-accent-1 mt-1">25%</p>
                <!-- Data: 53 Direct RSVPs from 208 invites -->
                <p class="text-xs text-secondary-dark">53 RSVPs from 208 invites</p>
            </div>
            <!-- Direct RSVP Show-Up Rate -->
            <div class="card metric-card-2">
                <p class="text-sm font-medium text-secondary-dark uppercase">Direct RSVP Show-Up Rate</p>
                <!-- Data: 74% (39/53) -->
                <p class="text-4xl font-bold text-accent-1 mt-1">74%</p>
                <!-- Data: 39 Direct Attendees from 53 total Direct RSVPs -->
                <p class="text-xs text-secondary-dark">39 Direct Attendees from 53 RSVPs</p>
            </div>
            <!-- Total Expenses (SEK) (EXCLUDING LINKEDIN AD) -->
            <div class="card metric-card-4">
                <p class="text-sm font-medium text-secondary-dark uppercase">Total Expenses (SEK)</p>
                <!-- 2688.42 (Food) + 700.00 (Flowers) = 3388.42 -->
                <p class="text-4xl font-bold text-accent-1 mt-1">3,388.42</p>
                <p class="text-xs text-secondary-dark">Food and Flowers only (Excludes LinkedIn Ad)</p>
            </div>
        </div>

        <!-- MOVED SECTION: Event Detail Tables -->
        <div class="grid grid-cols-1 gap-6 mb-8">
            <div class="card">
                <h2 class="text-xl font-semibold text-primary-dark mb-4 border-b pb-2" style="border-color: var(--color-light-accent-2);">Event Detail Tables</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">

                    <!-- Invitation Sources -->
                    <div>
                        <h3 class="text-lg font-medium text-primary-dark mb-3">Directly Invited People (Total=208)</h3>
                        <table class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Source</th>
                                    <th>Count</th>
                                    <th>% of Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- HQ Workshop: 66, 31.7% -->
                                <tr><td>HQ Workshop</td><td>66</td><td>31.7%</td></tr>
                                <!-- NGRH Members: 29, 13.9% -->
                                <tr><td>NGRH Members</td><td>29</td><td>13.9%</td></tr>
                                <!-- Directly Invited Clients/Retail: 113, 54.3% -->
                                <tr><td>Directly Invited Clients/Retail</td><td>113</td><td>54.3%</td></tr>
                                <tr class="font-bold border-t-2 border-[var(--color-primary-dark)]"><td>TOTAL INVITED</td><td>208</td><td>100%</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Expense Table -->
                    <div>
                        <h3 class="text-lg font-medium text-primary-dark mb-3">Total Expense Breakdown (All Costs)</h3>
                        <table class="responsive-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Cost (SEK)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>LinkedIn Ad</td><td>5,586.00</td></tr>
                                <tr><td>Food (Excl. Coffee)</td><td>2,688.42</td></tr>
                                <tr><td>Flowers (Host/Speaker)</td><td>700.00</td></tr>
                                <tr class="font-bold border-t-2 border-[var(--color-primary-dark)]"><td>TOTAL EXPENSES</td><td>8,974.42</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MOVED SECTION -->

        <!-- 2. & 3. Infographics and Breakdown (Charts) -->
        <div class="grid grid-cols-1 lg:col-cols-3 gap-6 mb-8">

            <!-- RSVP Distribution Donut Chart (Col 1) -->
            <div class="card lg:col-span-1">
                <h2 class="text-xl font-semibold text-primary-dark mb-4 border-b pb-2" style="border-color: var(--color-light-accent-2);">RSVP Distribution (Total=60)</h2>
                <div class="chart-container">
                    <canvas id="rsvpDistributionChart"></canvas>
                </div>
            </div>
            
            <!-- Attendance Breakdown Stacked Bar Chart (Col 2 & 3) -->
            <div class="card lg:col-span-2">
                <h2 class="text-xl font-semibold text-primary-dark mb-4 border-b pb-2" style="border-color: var(--color-light-accent-2);">Total Attendance Breakdown (Total=50)</h2>
                <div class="chart-container">
                    <canvas id="attendanceBreakdownChart"></canvas>
                </div>
            </div>
        </div>

        <!-- 4. Show-Up Rate Details (Charts) - STACKED FULL WIDTH -->

        <!-- Card 1: Show-Up Rate (Full Width) -->
        <div class="card mb-8">
            <h2 class="text-xl font-semibold text-primary-dark mb-4 border-b pb-2" style="border-color: var(--color-light-accent-2);">Show-Up Rate by Group</h2>
            <p class="text-sm text-gray-500 mb-2">Conversion rate (Attendees / RSVPs) for each direct group.</p>
            <div class="chart-container-small mb-4">
                <canvas id="showUpRateChart"></canvas>
            </div>
        </div>

        <!-- 5. Conclusions and Next Steps -->
        <div class="card mb-8">
            <h2 class="text-2xl font-bold text-primary-dark mb-4 border-b pb-2" style="border-color: var(--color-light-accent-2);">Conclusions</h2>
            
            <div class="text-secondary-dark leading-relaxed mb-6 space-y-3 text-base">
                <p>The event demonstrated strong engagement from <strong>Workshop HQ</strong> and <strong>NGRH members</strong>. Moving forward, the goal is to increase the share of attendees from client and retail organizations, ensuring the sessions primarily attract external professionals from the retail field.</p>
                <p>Ideally, Workshop and NGRH should be represented by just a few key people per company, allowing space for a more diverse audience of industry guests and potential collaborators.</p>
                <p>Attendance was estimated manually through photo review, which worked well this time but highlights the value of introducing a <strong>simple check-in system</strong> to improve data accuracy for future events.</p>
                <p>Finally, relocating the breakfast area to the reception could enhance the first impression and overall flow, making the experience more welcoming from the start.</p>
            </div>

            <h2 class="text-2xl font-bold text-primary-dark mb-4 border-b pb-2" style="border-color: var(--color-light-accent-2);">Next Steps</h2>
            <ul class="list-disc ml-6 text-secondary-dark leading-relaxed space-y-2 text-base">
                <li>Add a short question in the RSVP form asking how attendees heard about the event (e.g., LinkedIn, Mail, etc.) to better understand communication reach and source effectiveness.</li>
                <li>Introduce a <strong>QR code</strong> or quick check-in list at the entrance to confirm attendance and reduce “silent” arrivals.</li>
                <li>Refine the communication flow with <strong>well-timed reminders</strong>, including a calendar invite at registration, and follow-ups a week before, two days before, and on the morning of the event.</li>
                <li>Continue LinkedIn campaigns, keeping the focus on <strong>brand awareness</strong> and visibility for the Hub.</li>
            </ul>
        </div>
    </div>

    <script>
        // Data derived from analysis
        const data = {
            // RSVP Distribution (Total=60). (35 Directly Invited, 11 HQ, 7 NGRH, 7 External)
            rsvpLabels: [
                'Directly Invited Clients/Retail', 
                'HQ Workshop', 
                'NGRH Members', 
                'External Not Invited'
            ],
            rsvpCounts: [35, 11, 7, 7], 
            
            // Attendance Breakdown (Total=50). Order: Silent, External, NGRH, HQ, Directly Invited (bottom to top stacking)
            attendanceLabels: [
                'Silent Attendees', // 6
                'External Not Invited', // 5
                'NGRH Members', // 5
                'HQ Workshop', // 8
                'Directly Invited Clients/Retail' // 26
            ],
            attendanceCounts: [6, 5, 5, 8, 26], 

            // Funnel data removed
            
            // NEW DATA: RSVP to Attendee Conversion Rates
            showUpRateLabels: [
                'HQ Workshop',
                'NGRH Members',
                'Directly Invited Clients/Retail'
            ],
            showUpRatePercentages: [90.0, 87.5, 65.7],
            showUpRateDetails: ['9 / 10 RSVPs', '7 / 8 RSVPs', '23 / 35 RSVPs']
        };
        
        // Brand colors
        const colors = {
            primaryDark: '#5c0014',     
            secondaryDark: '#003f4d',   
            accentOrange: '#c63500',    
            lightAccentPink: '#ffbfc2', 
            lightAccentCyan: '#c0eded',  
            lightAccentPeach: '#ffd0b7', 
            softBackground: '#f1f5f6',  
            white: '#FFFFFF',
            chartText: '#171819'        
        };

        // Helper function to determine contrast color in pie/donut charts
        const getDatalabelColorPie = (index, chartType) => {
            let bgColor;

            if (chartType === 'rsvp') {
                // Mapping colors to RSVP groups
                const bgColors = [colors.primaryDark, colors.accentOrange, colors.secondaryDark, colors.lightAccentCyan];
                bgColor = bgColors[index];
            } else {
                return colors.white; 
            }

            // Contrast logic
            if (bgColor === colors.primaryDark) { 
                return colors.lightAccentPink; 
            } else if (bgColor === colors.secondaryDark) { 
                return colors.lightAccentCyan; 
            } else if (bgColor === colors.accentOrange) { 
                return colors.lightAccentPeach; 
            } else if (bgColor === colors.lightAccentCyan) { 
                return colors.secondaryDark; 
            } 
            
            return colors.chartText; 
        };


        // Function to create the Donut Chart (RSVP Distribution)
        function createRsvpDistributionChart() {
            const ctx = document.getElementById('rsvpDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.rsvpLabels,
                    datasets: [{
                        label: 'RSVP Count',
                        data: data.rsvpCounts,
                        backgroundColor: [
                            colors.primaryDark,      // Directly Invited Clients/Retail
                            colors.accentOrange,     // HQ Workshop
                            colors.secondaryDark,    // NGRH Members
                            colors.lightAccentCyan   // External Not Invited
                        ],
                        hoverOffset: 4,
                        borderWidth: 2,
                        borderColor: colors.softBackground
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right', // Legend on the right
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                color: colors.chartText 
                            }
                        },
                        title: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1) + '%';
                                    return ` ${context.label}: ${value} (${percentage})`;
                                }
                            }
                        },
                        // Data labels for percentage inside slices 
                        datalabels: { 
                            color: (context) => getDatalabelColorPie(context.dataIndex, 'rsvp'),
                            font: { weight: 'bold', size: 12 },
                            formatter: (value, context) => {
                                const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                const percentage = Math.round((value / total) * 100) + '%';
                                return percentage; 
                            }
                        }
                    }
                }
            });
        }

        // Function to create the Stacked Bar Chart (Attendance Breakdown)
        function createAttendanceBreakdownChart() {
            const ctx = document.getElementById('attendanceBreakdownChart').getContext('2d');
            const totalAttendance = data.attendanceCounts.reduce((a, b) => a + b, 0); 

            // Calculate percentages for tooltips
            const percentages = data.attendanceCounts.map(count => ((count / totalAttendance) * 100).toFixed(1) + '%');
            
            // Logic to apply specific contrast colors
            const getDatalabelColorSpecific = (label) => {
                // Using the specific names to assign colors
                switch (label) {
                    // Dark Boxes -> Light Text
                    case 'Directly Invited Clients/Retail': 
                        return colors.lightAccentPink; 
                    case 'NGRH Members': 
                        return colors.lightAccentCyan; 
                    case 'HQ Workshop': 
                        return colors.lightAccentPeach; 
                    // Light Boxes -> Dark Text
                    case 'Silent Attendees': 
                        return colors.primaryDark; 
                    case 'External Not Invited': 
                        return colors.secondaryDark; 
                        
                    default:
                        return colors.white; 
                }
            };

            // Creating datasets in reverse order for stacking to appear correctly (bottom-up in legend/data)
            const datasets = [
                { 
                    label: data.attendanceLabels[0], // Silent Attendees (6)
                    data: [data.attendanceCounts[0]], 
                    backgroundColor: colors.lightAccentPink, 
                    borderColor: colors.lightAccentPink, 
                    borderWidth: 1, 
                    stack: 'Stack 1',
                    datalabels: { color: getDatalabelColorSpecific(data.attendanceLabels[0]) } 
                },
                { 
                    label: data.attendanceLabels[1], // External Not Invited (5)
                    data: [data.attendanceCounts[1]], 
                    backgroundColor: colors.lightAccentCyan, 
                    stack: 'Stack 1',
                    datalabels: { color: getDatalabelColorSpecific(data.attendanceLabels[1]) } 
                },
                { 
                    label: data.attendanceLabels[2], // NGRH Members (5) - Index 2
                    data: [data.attendanceCounts[2]], 
                    backgroundColor: colors.secondaryDark, 
                    stack: 'Stack 1',
                    datalabels: { color: getDatalabelColorSpecific(data.attendanceLabels[2]) } 
                },
                { 
                    label: data.attendanceLabels[3], // HQ Workshop (8) - Index 3
                    data: [data.attendanceCounts[3]], 
                    backgroundColor: colors.accentOrange, 
                    stack: 'Stack 1',
                    datalabels: { color: getDatalabelColorSpecific(data.attendanceLabels[3]) } 
                },
                { 
                    label: data.attendanceLabels[4], // Directly Invited Clients/Retail (26) - Index 4
                    data: [data.attendanceCounts[4]], 
                    backgroundColor: colors.primaryDark, 
                    stack: 'Stack 1',
                    datalabels: { color: getDatalabelColorSpecific(data.attendanceLabels[4]) } 
                },
            ];

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Total Event Attendance'],
                    // Reverse the datasets so they are displayed top-to-bottom in the chart/legend 
                    datasets: datasets.reverse() 
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', 
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                usePointStyle: true,
                                color: colors.chartText,
                                reverse: true 
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                title: () => `Total Attendees: ${totalAttendance}`,
                                label: function(context) {
                                    const count = context.parsed.x;
                                    const label = context.dataset.label;
                                    
                                    // Find original index for percentage (based on data.attendanceLabels order)
                                    let percentageIndex = data.attendanceLabels.indexOf(label);

                                    return ` ${label}: ${count} (${percentages[percentageIndex]})`;
                                }
                            } 
                        },
                        // Configuration to show data inside each bar
                        datalabels: { 
                            anchor: 'center',
                            align: 'center',
                            offset: 0,
                            font: { weight: 'bold', size: 12 },
                            formatter: (value, context) => {
                                // Find the actual count using the label
                                const label = context.dataset.label;
                                const index = data.attendanceLabels.indexOf(label);
                                
                                // Return the count value
                                return data.attendanceCounts[index];
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            max: 55,
                            title: { display: true, text: 'Attendee Count', color: colors.chartText },
                            ticks: { color: colors.chartText } 
                        },
                        y: {
                            stacked: true,
                            ticks: { display: false }
                        }
                    }
                }
            });
        }
        
        // NEW FUNCTION: Show-Up Rate by Group Chart
        function createShowUpRateChart() {
            const ctx = document.getElementById('showUpRateChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.showUpRateLabels,
                    datasets: [{
                        label: 'Show-Up Rate (%)',
                        data: data.showUpRatePercentages,
                        backgroundColor: [
                            colors.accentOrange,     // HQ Workshop (Highest Rate)
                            colors.secondaryDark,    // NGRH Members (Middle Rate)
                            colors.primaryDark,      // Directly Invited Clients/Retail (Lowest Rate)
                        ],
                        borderColor: colors.softBackground,
                        borderWidth: 1,
                        borderRadius: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bars
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: (context) => context[0].label,
                                label: function(context) {
                                    const percentage = context.parsed.x.toFixed(1) + '%';
                                    // Get the attendance count detail from the separate array
                                    const detail = data.showUpRateDetails[context.dataIndex];
                                    return ` Show-Up Rate: ${percentage} (${detail})`;
                                }
                            }
                        },
                        datalabels: { 
                            anchor: 'end',
                            align: 'end',
                            color: colors.chartText, 
                            font: { weight: 'bold', size: 14 },
                            formatter: (value) => value.toFixed(1) + '%'
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 100, 
                            title: { display: true, text: 'Show-Up Rate (%)', color: colors.chartText },
                            grid: { display: true, color: 'rgba(0, 0, 0, 0.05)' },
                            ticks: { color: colors.chartText }
                        },
                        y: {
                            grid: { display: false },
                            ticks: { color: colors.chartText, font: { weight: '600' } } 
                        }
                    }
                }
            });
        }

        // The createFunnelChart function has been removed.


        // Initialize all charts on load
        window.onload = function() {
            // Register the ChartDataLabels plugin
            if (typeof ChartDataLabels !== 'undefined') {
                Chart.register(ChartDataLabels);
            }
            createRsvpDistributionChart();
            createAttendanceBreakdownChart(); 
            createShowUpRateChart(); 
            // Removed createFunnelChart() call
        };

    </script>
</body>
</html>
